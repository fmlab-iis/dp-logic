In this section we describe how properties in the differential privacy literature can be expressed using $\dpCTLstar$ formulae.

\paragraph{Standard Differential Privacy.}
Consider the survey mechanism (Subsection~\ref{subsec:survey}). The formula $\dpriv{\ln 3}{0} (\X \mathit{out}_Y)$ holds in state $s$ if for  $t$ with $sNt$, the probability of satisfying $\X \mathit{out}_Y$ from $s$ and $t$ satisfy:
$\myPr{s}{K}{N}{\X \mathit{out}_Y}\le 3\myPr{t}{K}{N}{\X \mathit{out}_Y}$. The formula $\dpriv{\ln 3}{0} (\X \mathit{out}_Y)\wedge \dpriv{\ln 3}{0} (\X \mathit{out}_N)$ thus specifies the differential privacy property for states $+$ and $-$ in Example~\ref{exa:survey}.
The survey mechanism is
$(\ln 3, 0)$-differentially private.


\hide{Let us recall briefly the analysis of the survey mechanism. For any $x \in \mathcal{X}$, we have $1/4 \leq \Pr[M(x) = Y] \leq
3/4$. Hence for any neighboring $x, x' \in \mathcal{X}$, $\Pr[M(x) =
Y] \leq 3/4 = 3 \cdot 1/4 \leq 3 \Pr[M (x') =
Y]$. Similarly, $\Pr[M (x) = N] \leq 3 \Pr[M (x') = N]$ for any
neighboring $x, x' \in \mathcal{X}$. 
}

 Define the formula
$\psi = \dpriv{\ln 2}{0} (\X out_0) \wedge \dpriv{\ln 2}{0} (\X out_1) \wedge
\cdots \wedge \dpriv{\ln 2}{0} (\X out_5)$. If the state $s_k$ satisfies
$\psi$ for $k = 0, \ldots, 5$, then the $\frac{1}{2}$-geometric mechanism (Subsection~\ref{subsec:geometric}) is
$(\ln 2, 0)$-differentially private.


\paragraph{Compositional Properties.}
Compositional aspect is one of the building block for differentially private algorithms. According to the compositional theorem \cite[Theorem 3.16]{DR:14:AFDP}, for $(\epsilon_1,\delta_1)$-differentially private algorithm $M_1$ and
$(\epsilon_2,\delta_2)$-differentially private algorithm $M_2$, their combination $M$ defined by $M(x)=(M_1(x), M_2(x))$ is $(\epsilon_1 + \epsilon_2,\delta_1+\delta_2)$-differentially private. The degradation is rooted in the repeated computation. To illustrate this property, we consider the extended survey example below where the mechanism allows two consequent queries.
The model is depicted in Figure~\ref{figure:2-dp-mc}.
%where states $Y_1,Y_2$ are labelled by $Y$, and $N_1,N_2$ are labelled by $N$.

\begin{figure}
    \centering
    \begin{subfigure}{.4\columnwidth}
\resizebox{\columnwidth}{!}{
    \begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node
    distance=1cm,node/.style={circle,draw}]
    \node[node] (p) at ( -1.5,  0) { $+$ };
    \node[node] (Y1) at ( 0, .8) { $s_1$ };
    \node at (0, 1.3) { $\mathit{out}_Y$ };
    \node[node] (N1) at ( 0, -.8) { $t_1$ };
    \node at (0, -.3) { $\mathit{out}_N$ };
    \node[node] (Y2) at (1.5,  .8) { $s_2$ };
    \node at (1.5, 1.3) { $\mathit{out}_Y$ };
    \node[node] (N2) at ( 1.5, -.8) { $t_2$ };
    \node at (1.5, -.3) { $\mathit{out}_N$ };

    \path
    (p) edge node [above] { $\frac{3}{4}$ } (Y1)
    (p) edge node [below] { $\frac{1}{4}$ } (N1)
    (Y1) edge node [above] { $\frac{3}{4}$ } (Y2)
    (Y1) edge node [above] { $\frac{1}{4}$ } (N2)
    (N1) edge node [below] { $\frac{3}{4}$ } (Y2)
    (N1) edge node [below] { $\frac{1}{4}$ } (N2)
    ;
    \end{tikzpicture}
}
%        \caption{Markov Chain of }
%        \label{figure:2-dp-mc1}
    \end{subfigure}
    \hspace{.05\columnwidth}
    \begin{subfigure}{.4\columnwidth}
        \resizebox{\columnwidth}{!}{
            \begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node
    distance=1cm,node/.style={circle,draw}]
    \node[node] (n) at ( -1.5,  0) { $-$ };
    \node[node] (Y1) at ( 0, .8) { $s_1$ };
    \node at (0, 1.3) { $\mathit{out}_Y$ };
    \node[node] (N1) at ( 0, -.8) { $t_1$ };
    \node at (0, -.3) { $\mathit{out}_N$ };
    \node[node] (Y2) at (1.5,  .8) { $s_2$ };
    \node at (1.5, 1.3) { $\mathit{out}_Y$ };
    \node[node] (N2) at ( 1.5, -.8) { $t_2$ };
    \node at (1.5, -.3) { $\mathit{out}_N$ };

    \path
    (n) edge node [above] { $\frac{1}{4}$ } (Y1)
    (n) edge node [below] { $\frac{3}{4}$ } (N1)
    (Y1) edge node [above] { $\frac{1}{4}$ } (Y2)
    (Y1) edge node [above] { $\frac{3}{4}$ } (N2)
    (N1) edge node [below] { $\frac{1}{4}$ } (Y2)
    (N1) edge node [below] { $\frac{3}{4}$ } (N2)
    ;
            \end{tikzpicture}
        }
%        \caption{Markov Chain of}
%        \label{figure:2-dp-mc2}
    \end{subfigure}
    \caption{Markov Chain of Double Surveys}
    \label{figure:2-dp-mc}
\end{figure}



We consider the formula $\dpriv{\ln 9}{0} (\X (\mathit{out}_Y\wedge \X \mathit{out}_Y))$. A path satisfies $\X (\mathit{out}_Y\wedge \X \mathit{out}_Y)$ if the second state satisfies $\mathit{out}_Y$ and the third state satisfies $\mathit{out}_Y$ as well. We verify that this formula is satisfied for states $+$ and $-$. Moreover, the bound $\epsilon=\ln 9$ is tight, since the probability of satisfying $\X (\mathit{out}_Y\wedge \X \mathit{out}_Y)$ from states $+$ and $-$ are $\frac{9}{16}$ and $\frac{1}{16}$, respectively. Finally, the formula $\wedge_{a_1,a_2}\dpriv{\ln 9}{0} (\X (a_1\wedge \X a_2))$ corresponds to the desired compositional property for the model, where $a_1,a_2$ range over all atomic propositions $\{\mathit{out}_Y, \mathit{out}_N\}$.

We consider two other formulae for comparision:
(a) Formula $\dpriv{\ln 3}{0} (\X \X \mathit{out}_Y)$. In this case we do not have privacy loss, even though we are querying twice: the reason is that the output of the first query is not utilized at all. It is easy to verify that it is indeed satisfied by $+$ and $-$.
(b) Formula $\dpriv{\ln 3}{0} (\X (\mathit{out}_Y\wedge \dpriv{\ln 3}{0}(\X \mathit{out}_Y)))$. This is a nested $\dpCTL$ formula, where the inner state formula $\dpriv{\ln 3}{0}(\X \mathit{out}_Y)$ states the one step differential privacy. Observe the inner formula is satisfied by all neighbours. Thus, the outer formula also has no privacy loss.

\paragraph{Tighter Privacy Bounds for Composition.}
One of the advantage of applying model checking is that we may get tighter bounds for composition. Consider our survey example, and the property $\dpriv{0}{.5} (\X \mathit{out}_Y)$. Obviously, it holds in states $+$ and $-$. A careful check ensures that one cannot decrease the value of $\epsilon_1=0$ or $\delta_1=.5$ without increasing the other.


Now we consider the formula $\dpriv{\epsilon_2}{\delta_2} (\X
(\mathit{out}_Y\wedge \X \mathit{out}_Y))$ under the model in
Figure~\ref{figure:2-dp-mc}. Applying the
compositional theorem, one has $\epsilon_2=2\epsilon_1=0$ and
$\delta_2=2\delta_1=1$. However, we can check easily that one gets
better privacy parameter $(0,0.5)$.
% or $(-\infty,\frac{9}{16})$. \bw{use $-\infty$ instead of $\ln 0$. is it okay?}\lz{lets just remove it ;)}

\paragraph{Reachability Privacy.}
The formula $\dpriv{\epsilon}{\delta}(F \top)$ is a reachability privacy: it states that related states should have similar probabilities of eventually reaching $\top$. Reachability privacy is often used in combination with other properties.

As an example, for our threshold model (Algorithm~\ref{algorithm:online-model}), we consider the property $\Phi=\wedge_{i=1}^{6} \dpriv{3}{0}(\X^i \top) \wedge \PJ{\le 0.025}(\X^6 F \top) \wedge \dpriv{3}{0.025}(\X^6 F \top)$, to express the privacy. The state $s_{34}$ (with the input threshold $t=3$, and the database $d=4$) satisfies $\Phi$ by our computation. It means the probability of reaching $\top$  within $i$ steps with $i$ ranges over $\{1,\ldots,6\}$, is $(3, 0)$-differentially private for the database $d$ and its neighbours ($d=3$ and $d=5$). It also states that the probability of reaching $\top$ after no less than $6$ steps, is smaller than $0.025$ and is  $(3, 0.025)$-differentially private.

Later we shall illustrate how reachability privacy can be used to specify differential privacy property for MDPs.

\paragraph{Infinite Differential Privacy.}
Thanks to the expressiveness of linear temporal logic, our logic $\dpCTLstar$ generalizes differential privacy to infinite
behaviors naturally. Classical differential privacy discusses properties about
randomized terminating mechanisms. 
% Sophisticated mechanisms for streaming data have also been discussed 
% in social networks and internet of things. Such mechanisms inherently 
% have infinite computation. Their privacy guarantees are approximated 
% by those of the prefixes of computation.
With $\dpCTLstar$, the subformula $\phi$ in $\dpriv{\epsilon}{\delta} \phi$
can be an arbitrary $\dpCTLstar$ path formula. One can specify
$(\epsilon, \delta)$-closedness over infinite behaviors naturally.

Consider the Bluetooth example in~\cite{DKNP04} and the
formula $\dpriv{\epsilon}{\delta}{\F \G \mathit{timeout}}$. Let us say
two states are neighbors if a slave device in a state is replaced by
another device in the other state.
Then the formula holds if the probability of having
continuous time out (say, in the denial of service attack) is
$(\epsilon, \delta)$-close for all neighbors. That is, adding a slave
device cannot increase the chance of service failure significantly.

